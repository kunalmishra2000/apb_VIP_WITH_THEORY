Ah! Perfect ‚Äî now I understand exactly what you want. Let‚Äôs break the roles **very clearly** in a standard UVM APB testbench, where the **TB is the master** and the **DUT is the slave**. I‚Äôll go **signal by signal** and step by step.

---

## 1Ô∏è‚É£ Environment setup

* **Master:** Your UVM testbench acts as APB master (driver drives the bus)
* **DUT:** Acts as APB slave
* **Sequence:** Generates the intended transactions (write/read)
* **Driver:** Drives bus signals according to the sequence
* **Monitor:** Passively observes the bus signals from DUT
* **Reference model:** Simulates DUT internally to generate expected outputs
* **Scoreboard:** Compares expected vs actual

---

## 2Ô∏è‚É£ Step-by-step flow for a **write transaction**

1. **Sequence generates write transaction**
   Example: write `0xABCD` to address `0x10`

   ```
   seq_item.paddr = 0x10
   seq_item.pwdata = 0xABCD
   seq_item.pwrite = 1
   ```

2. **Driver sends write to DUT**

   * Drives `PSEL=1, PENABLE=0‚Üí1, PADDR=0x10, PWDATA=0xABCD, PWRITE=1`
   * DUT receives these signals
   * **Driver never knows if DUT accepted correctly**; it just drives signals

3. **Monitor observes actual bus signals**

   * Captures `PADDR`, `PWDATA`, `PWRITE`, `PREADY`
   * At the **completion of the transfer (PREADY=1)**:

     ```systemverilog
     if (montior_cb.pwrite)
         seq_item_h.pwdata <= montior_cb.pwdata;   // actual write
     else
         seq_item_h.prdata <= montior_cb.prdata;   // actual read
     ```

4. **Monitor sends observed write data to Reference Model**

   * The **reference model updates its internal memory**
   * Example: `memory[0x10] = 0xABCD`
   * This data will be used later as **expected read value** if a read occurs from the same address

---

## 3Ô∏è‚É£ Step-by-step flow for a **read transaction**

1. **Sequence generates read transaction**
   Example: read from address `0x10`

2. **Driver drives bus signals**

   * `PSEL=1, PENABLE=0‚Üí1, PADDR=0x10, PWRITE=0`

3. **DUT responds**

   * Drives `PRDATA=0xABCD, PREADY=1`

4. **Monitor captures actual data**

   ```systemverilog
   seq_item_h.prdata <= montior_cb.prdata
   ```

5. **Scoreboard compares**

   * Expected read: `ref_model.memory[0x10] = 0xABCD`
   * Actual read: `monitor.prdata = 0xABCD`
   * Compare ‚Üí pass/fail

---

## 4Ô∏è‚É£ Roles summary

| Role                | Sends/Drives                                              | Receives/Observes                              | Purpose                                                |
| ------------------- | --------------------------------------------------------- | ---------------------------------------------- | ------------------------------------------------------ |
| **Sequence**        | Transaction intent (write/read, addr, data)               | N/A                                            | Generates test cases                                   |
| **Driver**          | Drives bus signals (PADDR, PWDATA, PWRITE, PSEL, PENABLE) | Sequence item                                  | Stimulates DUT                                         |
| **DUT**             | Drives response signals (PRDATA, PREADY, PSLVERR)         | Bus signals from master                        | Implements functionality                               |
| **Monitor**         | N/A                                                       | Bus signals from DUT                           | Observes actual transactions, captures `pwdata/prdata` |
| **Reference Model** | N/A                                                       | Gets write data from monitor                   | Computes expected results (for reads)                  |
| **Scoreboard**      | N/A                                                       | Monitor captures & Reference model predictions | Compares actual vs expected, raises pass/fail          |

---

### ‚úÖ Key points

1. **Expected data** is **generated by reference model**, using **observed write data from monitor**.
2. **Actual data** is captured by **monitor** from DUT‚Äôs bus outputs (`PRDATA` for reads, `PWDATA` for writes).
3. **Driver** only drives bus signals; it does not provide ‚Äúactual‚Äù or ‚Äúexpected‚Äù data.
4. **Monitor ‚Üí Reference Model ‚Üí Scoreboard** is the **flow for expected data generation and checking**.

---

### üîë Mental picture (flow)

```
Sequence  --> Driver --> DUT (Slave)
                         |
                         v
                      Monitor (observes actual)
                         |
                         v
                  Reference Model (computes expected)
                         |
                         v
                     Scoreboard (compare actual vs expected)
```

---

If you want, I can **draw a diagram showing exactly how write data flows from monitor ‚Üí reference model ‚Üí expected read ‚Üí scoreboard**, and where actual read data is captured ‚Äî it makes the whole UVM APB flow visually crystal clear.

Do you want me to make that diagram?
